<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>碳足迹 - 企业碳足迹平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo">
                <i class="fas fa-leaf"></i> 碳足迹平台
            </a>
            <div class="nav-menu">
                <a href="../base_info/index.html" class="nav-item">
                    <i class="fas fa-info-circle"></i> 基础信息
                </a>
                <a href="index.html" class="nav-item active">
                    <i class="fas fa-shoe-prints"></i> 碳足迹
                </a>
                <a href="../cbam_calculation/index.html" class="nav-item">
                    <i class="fas fa-calculator"></i> CBAM计算
                </a>
                <a href="../daily_carbon_factor/index.html" class="nav-item">
                    <i class="fas fa-chart-line"></i> 今日电碳因子
                </a>
                <a href="../prediction/index.html" class="nav-item">
                    <i class="fas fa-crystal-ball"></i> 碳因子预测
                </a>
                <a href="../agent/index.html" class="nav-item">
                    <i class="fas fa-robot"></i> 智能体
                </a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1><i class="fas fa-shoe-prints"></i> 企业碳足迹计算</h1>
            <p>计算企业Scope1、Scope2及总碳足迹</p>
        </div>

        <!-- 上下结构：先基础参数，后计算区域 -->
        <div class="content-wrapper">
            <!-- 基础参数输入区域（上） -->
            <div class="form-section base-param-section">
                <h2><i class="fas fa-cog"></i> 基本信息</h2>
                <form id="carbonBaseForm" class="info-form">
                    <div class="form-grid base-form-grid">
                        <div class="form-group">
                            <label for="calcDate" data-required="*">计算时间</label>
                            <input type="date" id="calcDate" name="calcDate" required>
                        </div>
                        <div class="form-group">
                            <label for="cfIndustryType" data-required="*">行业类型</label>
                            <select id="cfIndustryType" name="cfIndustryType" required>
                                <option value="">请选择行业</option>
                                <option value="steel">钢铁</option>
                                <option value="cement">水泥</option>
                                <option value="fertilizer">化肥</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productType" data-required="*">产品类型</label>
                            <select id="productType" name="productType" required>
                                <option value="">请先选择行业</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cfRegion" data-required="*">所属地区</label>
                            <select id="cfRegion" name="cfRegion" required>
                                <option value="">请选择地区</option>
                                <option value="华中">华中地区</option>
                                <option value="华南">华南地区</option>
                                <option value="华北">华北地区</option>
                                <option value="华东">华东地区</option>
                                <option value="西南">西南地区</option>
                                <option value="西北">西北地区</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>

            <!-- 碳足迹计算区域（下） -->
            <div class="list-section calc-section">
                <h2><i class="fas fa-calculator"></i> 碳足迹计算</h2>
                <!-- 选项卡：横向占满整行 -->
                <div class="calc-tabs full-width-tabs">
                    <button class="tab-btn active" data-tab="scope1">Scope 1 (直接排放)</button>
                    <button class="tab-btn" data-tab="scope2">Scope 2 (间接排放)</button>
                    <button class="tab-btn" data-tab="total">总碳足迹</button>
                </div>

                <!-- Scope1 计算面板 -->
                <div class="tab-panel active" id="scope1Panel">
                    <form id="scope1Form" class="info-form">
                        <!-- 燃料燃烧排放：独立卡片，含煤炭7、燃油5、燃气7 -->
                        <div class="calc-card fuel-card">
                            <h3><i class="fas fa-fire"></i> 燃料燃烧排放</h3>
                            
                            <!-- 煤炭消耗 7种 -->
                            <div class="fuel-subsection">
                                <h4><i class="fas fa-coal"></i> 煤炭消耗 (吨)</h4>
                                <div class="fuel-grid">
                                    <div class="form-group"><label for="coal1">电煤</label><input type="number" id="coal1" name="coal1" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="coal2">无烟煤</label><input type="number" id="coal2" name="coal2" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="coal3">炼焦烟煤</label><input type="number" id="coal3" name="coal3" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="coal4">一般烟煤</label><input type="number" id="coal4" name="coal4" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="coal5">褐煤</label><input type="number" id="coal5" name="coal5" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="coal6">煤制品</label><input type="number" id="coal6" name="coal6" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="coal7">焦炭</label><input type="number" id="coal7" name="coal7" step="0.01" min="0" placeholder="输入消耗量"></div>
                                </div>
                            </div>
                            
                            <!-- 燃油消耗 5种 -->
                            <div class="fuel-subsection">
                                <h4><i class="fas fa-oil-can"></i> 燃油消耗 (吨)</h4>
                                <div class="fuel-grid">
                                    <div class="form-group"><label for="oil1">原油</label><input type="number" id="oil1" name="oil1" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="oil2">燃料油</label><input type="number" id="oil2" name="oil2" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="oil3">汽油</label><input type="number" id="oil3" name="oil3" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="oil4">煤油</label><input type="number" id="oil4" name="oil4" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="oil5">柴油</label><input type="number" id="oil5" name="oil5" step="0.01" min="0" placeholder="输入消耗量"></div>
                                </div>
                            </div>
                            
                            <!-- 燃气消耗 7种，单位：万立方米 -->
                            <div class="fuel-subsection">
                                <h4><i class="fas fa-gas-pump"></i> 燃气消耗 (万立方米)</h4>
                                <div class="fuel-grid">
                                    <div class="form-group"><label for="gas1">液化石油气</label><input type="number" id="gas1" name="gas1" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="gas2">炼厂干气</label><input type="number" id="gas2" name="gas2" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="gas3">天然气</label><input type="number" id="gas3" name="gas3" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="gas4">焦炉煤气</label><input type="number" id="gas4" name="gas4" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="gas5">高炉煤气</label><input type="number" id="gas5" name="gas5" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="gas6">转炉煤气</label><input type="number" id="gas6" name="gas6" step="0.01" min="0" placeholder="输入消耗量"></div>
                                    <div class="form-group"><label for="gas7">其他煤气</label><input type="number" id="gas7" name="gas7" step="0.01" min="0" placeholder="输入消耗量"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 过程排放：独立卡片 - 动态生成 -->
                        <div class="calc-card process-card">
                            <h3 id="processEmissionTitle"><i class="fas fa-industry"></i> 过程排放</h3>
                            <p class="form-description" id="process-description">请先选择行业和产品以显示过程排放表单</p>
                            <div class="form-grid process-form-grid" id="processEmissionContainer">
                                <div class="no-process-data" style="text-align: center; padding: 20px; color: #666;">
                                    <i class="fas fa-industry" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.3;"></i>
                                    <p>请先选择行业和产品</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-calculator"></i> 计算Scope 1
                            </button>
                            <button type="button" id="resetScope1Btn" class="btn btn-secondary">
                                <i class="fas fa-redo"></i> 重置
                            </button>
                        </div>
                    </form>
                    
                    <!-- Scope 1 独立计算结果展示 -->
                    <div class="result-display scope1-result">
                        <h3><i class="fas fa-chart-bar"></i> Scope 1 计算结果</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>燃料燃烧排放：</label>
                                <span id="fuelResult">-- 吨CO₂</span>
                            </div>
                            <div class="result-item">
                                <label>过程排放：</label>
                                <span id="processResult">-- 吨CO₂</span>
                            </div>
                            <div class="result-item total-item">
                                <label>Scope 1 总排放：</label>
                                <span id="scope1TotalResult">-- 吨CO₂</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scope2 计算面板 -->
                <div class="tab-panel" id="scope2Panel">
                    <form id="scope2Form" class="info-form">
                        <div class="calc-card scope2-card">
                            <div class="form-grid scope2-form-grid">
                                <div class="form-group">
                                    <label for="electricity" data-required="*">外购电力(万千瓦时)</label>
                                    <input type="number" id="electricity" name="electricity" step="0.01" min="0" placeholder="请输入数值" required>
                                </div>
                                <div class="form-group">
                                    <label for="carbonFactor" data-required="*">电碳因子(吨CO₂/万千瓦时)</label>
                                    <input type="number" id="carbonFactor" name="carbonFactor" step="0.001" min="0" readonly placeholder="自动获取地区电碳因子">
                                    <button type="button" id="getCarbonFactorBtn" class="btn btn-primary" style="margin-top:10px;min-width:unset;padding:8px 15px;">
                                        <i class="fas fa-refresh"></i> 获取电碳因子
                                    </button>
                                </div>
                                <!-- 新增：用电月份与日期 -->
                                <div class="form-group">
                                    <label for="electricityMonth" data-required="*">用电月份</label>
                                    <select id="electricityMonth" name="electricityMonth" required>
                                        <option value="">请选择月份</option>
                                        <option value="1">1月</option>
                                        <option value="2">2月</option>
                                        <option value="3">3月</option>
                                        <option value="4">4月</option>
                                        <option value="5">5月</option>
                                        <option value="6">6月</option>
                                        <option value="7">7月</option>
                                        <option value="8">8月</option>
                                        <option value="9">9月</option>
                                        <option value="10">10月</option>
                                        <option value="11">11月</option>
                                        <option value="12">12月</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="electricityDay" data-required="*">用电日期</label>
                                    <select id="electricityDay" name="electricityDay" required>
                                        <option value="">请选择日期</option>
                                        <option value="1">1日</option>
                                        <option value="2">2日</option>
                                        <option value="3">3日</option>
                                        <option value="4">4日</option>
                                        <option value="5">5日</option>
                                        <option value="6">6日</option>
                                        <option value="7">7日</option>
                                        <option value="8">8日</option>
                                        <option value="9">9日</option>
                                        <option value="10">10日</option>
                                        <option value="11">11日</option>
                                        <option value="12">12日</option>
                                        <option value="13">13日</option>
                                        <option value="14">14日</option>
                                        <option value="15">15日</option>
                                        <option value="16">16日</option>
                                        <option value="17">17日</option>
                                        <option value="18">18日</option>
                                        <option value="19">19日</option>
                                        <option value="20">20日</option>
                                        <option value="21">21日</option>
                                        <option value="22">22日</option>
                                        <option value="23">23日</option>
                                        <option value="24">24日</option>
                                        <option value="25">25日</option>
                                        <option value="26">26日</option>
                                        <option value="27">27日</option>
                                        <option value="28">28日</option>
                                        <option value="29">29日</option>
                                        <option value="30">30日</option>
                                        <option value="31">31日</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-calculator"></i> 计算Scope 2
                            </button>
                            <button type="button" id="resetScope2Btn" class="btn btn-secondary">
                                <i class="fas fa-redo"></i> 重置
                            </button>
                        </div>
                    </form>
                    
                    <!-- Scope 2 独立计算结果展示 -->
                    <div class="result-display scope2-result">
                        <h3><i class="fas fa-chart-bar"></i> Scope 2 计算结果</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>外购电力：</label>
                                <span id="electricityValue">-- 万千瓦时</span>
                            </div>
                            <div class="result-item">
                                <label>电碳因子：</label>
                                <span id="carbonFactorValue">-- 吨CO₂/万千瓦时</span>
                            </div>
                            <div class="result-item total-item">
                                <label>Scope 2 总排放：</label>
                                <span id="scope2TotalResult">-- 吨CO₂</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 总碳足迹面板 - 删除饼状图 -->
                <div class="tab-panel" id="totalPanel">
                    <div class="total-result">
                        <div class="result-item">
                            <label>Scope 1 排放量：</label>
                            <span id="scope1Result">-- 吨CO₂</span>
                        </div>
                        <div class="result-item">
                            <label>Scope 2 排放量：</label>
                            <span id="scope2Result">-- 吨CO₂</span>
                        </div>
                        <div class="result-item total-item">
                            <label>总碳足迹：</label>
                            <span id="totalResult">-- 吨CO₂</span>
                        </div>
                    </div>

                    <div class="form-actions" style="margin-top:20px">
                        <button type="button" id="calcTotalBtn" class="btn btn-primary">
                            <i class="fas fa-sum"></i> 计算总碳足迹
                        </button>
                        <button type="button" id="resetAllBtn" class="btn btn-secondary">
                            <i class="fas fa-trash-alt"></i> 清空所有结果
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>